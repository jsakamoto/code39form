var Code39Form;!function(t){function e(t){var e=$("div[data-line-id="+t.id+"]");$(".barcode-image",e).html("").barcode(t.text,"code39",{barWidth:3,showHRI:!1}),$(".human-readable .content",e).text(t.text)}function n(){$(".remove-input-line").toggleClass("disabled",u.length<2)}function i(t){$("#barcode-input-"+t).focus()}var o=1==("undefined"!=typeof localStorage)?{get:function(t){return localStorage.getItem(t)},put:function(t,e){return localStorage.setItem(t,e)}}:{get:function(t){return $.cookie(t)},put:function(t,e){return $.cookie(t,e)}},r=o.get("inputLines")||'[{"id":1,"text":""}]',u=JSON.parse(r),a=$(".input-lines-container"),c=$("#line-template").html(),l=Handlebars.compile(c);u.forEach(function(t){var n=l(t);a.append(n),e(t)}),n(),$(document).on("click",".add-input-line",function(){var t=u.map(function(t){return t.id}).reduce(function(t,e){return Math.max(t,e)})+1,e={id:t,text:""},r=l(e);a.append(r),u.push(e),o.put("inputLines",JSON.stringify(u)),n(),i(t)}),$(document).on("click",".remove-input-line:not(.disabled)",function(t){var e=$(t.target).closest(".input-line"),r=e.data("line-id");if(!($(".input-line").length<2))if(confirm("Are you sure?")){e.remove();var a=u.filter(function(t){return t.id==r}).pop(),c=u.indexOf(a);u.splice(c,1),o.put("inputLines",JSON.stringify(u)),n(),i((u[c]||u[u.length-1]).id)}else i(r)}),$(document).on("change keydown paste",".input-line .control input:text",function(t){var n=$(t.target).closest(".input-line").data("line-id"),i=t.target;setTimeout(function(){var t=i.value.toUpperCase(),r=u.filter(function(t){return t.id==n}).pop();void 0!=r&&r.text!=t&&(r.text=t,e(r),o.put("inputLines",JSON.stringify(u)))},0)}),window.onerror=function(t,e,n,i,o){o=o||{message:t,stack:(e||"- unknown souce file -")+"("+n+":"+i+")"},alert(o)}}(Code39Form||(Code39Form={}));
//# sourceMappingURL=index.min.js.map
